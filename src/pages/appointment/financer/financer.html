<ion-header>

    <ion-navbar color="primary">
        <ion-title>Financiador</ion-title>
    </ion-navbar>

</ion-header>


<ion-content>
    <h4 class="parrafoFinanciador">Lo que nos queda es escoger el financiador y el pago, ya casi terminamos…</h4>
    <ion-list>

        <ion-card class="evaluate">
            <ion-list>
                <ion-item color="light" item-start (click)="evaluateEnsurance($event)">
                    <p>¿Cuenta con seguro?</p>
                    <ion-icon item-end name="arrow-dropdown"></ion-icon>
                </ion-item>

                <ion-list class="nombresLista" *ngIf="firtClick">
                    <button ion-item *ngFor="let quest of questions" (click)="validateSelected(quest.id)">
                        {{ quest.name }}
                    </button>
                </ion-list>
            </ion-list>
        </ion-card>

        <ion-card class="seguroList">
            <ion-list>
                <ion-item color="light" *ngIf="isInsuranceName" (click)="selectEnsurance($event)">
                    {{ myEnsuranceName }}
                </ion-item>
                <ion-list *ngIf="isInsurance">
                    <button ion-item *ngFor="let item of items" (click)="insuranceSelected(item.cod_pagador_pk, item.nombre_garante)">
                        {{ item.nombre_garante }}
                    </button>
                </ion-list>
            </ion-list>
        </ion-card>

        <div text-right class="precio" *ngIf="price!=undefined">
            <p>Precio de la Consulta: {{ 'S/. ' + price }}</p>
        </div>
    </ion-list>

    <div class="container-gris" *ngIf="open == true">
        <div padding>
            <h4 text-center class="tituloMetodos">Metodos de Pago</h4>
            <ion-segment [(ngModel)]="pago">
                <ion-segment-button value="enLocal">
                    En local
                </ion-segment-button>
                <ion-segment-button value="enClinica">
                    Con tarjeta 
                </ion-segment-button>
            </ion-segment>
        </div>
        <div [ngSwitch]="pago">
            <ion-list *ngSwitchCase="'enLocal'">
                <div class="resumen" >
                        <ion-card>
                                <div class="containerTextoPago">
                                    <h3 class="titleCardPago">Lo que has escogido hasta el momento</h3>
                                </div>
                                <div>
                                    <ion-row class="centrar">   
                                        <ion-col col-4>
                                            <img id="profile-image" src="http://dappapache02.eastus.cloudapp.azure.com:4200/img/professionals/{{doctor.id}}.png">
                                        </ion-col>
                                        <ion-col col-8>
                                            <h3 class="nombreDoctor" text-center>
                                                {{ doctor.fullName }}
                                            </h3>
                                        </ion-col>
                                    </ion-row>
                                </div>
                                    <div class="centrar">
                                        <p bold class="izquierda">Sede:</p>
                                        <p class="blue" type="text" disabled="true">Mendiola</p>
                                    </div>
                                    <div  class="centrar">
                                        <p class="izquierda">Especialidad:</p>
                                        <p item-end class="blue" disabled="true"> {{ doctor.service.description }}</p>
                                    </div>
                                    <div  class="centrar">
                                        <p class="izquierda">Fecha:</p> 
                                        <p item-end class="blue" disabled="true">
                                            {{ date | date:'EEEE d , MMMM ' : 'es' }}
                                        </p>
                                    </div>
                                    <div  class="centrar">
                                        <p class="izquierda">Hora:</p>
                                        <p class="blue" type="text" disabled="true">
                                            {{ hora.hour | slice:0:5}}
                                        </p>
                                    </div>
                                    <div  class="centrar">
                                        <p class="izquierda">Costo:</p>
                                        <p class="blue" item-end type="text" disabled="true">
                                            {{ 'S/. ' + price }}
                                        </p>
                                    </div>
                            </ion-card>
                    
                
                <div padding>
                    <button ion-button color="secondary" class="botonAccept" [class.button-disabled]="true" block (click)="next()">Confirmar cita</button>
                </div>

                
            </div>
        </ion-list>
                        

            
            <ion-list *ngSwitchCase="'enClinica'">

                <div class="resumen" >
                    <ion-card>
                        <div class="containerTextoPago">
                            <h3 class="titleCardPago">Lo que has escogido hasta el momento</h3>
                        </div>
                        <div>
                            <ion-row class="centrar">   
                                <ion-col col-4>
                                    <img id="profile-image" src="http://dappapache02.eastus.cloudapp.azure.com:4200/img/professionals/{{doctor.id}}.png">
                                </ion-col>
                                <ion-col col-8>
                                    <h3 class="nombreDoctor" text-center>
                                        {{ doctor.fullName }}
                                    </h3>
                                </ion-col>
                            </ion-row>
                        </div>
                            <div class="centrar">
                                <p bold class="izquierda">Sede:</p>
                                <p class="blue" type="text" disabled="true">Mendiola</p>
                            </div>
                            <div  class="centrar">
                                <p class="izquierda">Especialidad:</p>
                                <p item-end class="blue" disabled="true"> {{ doctor.service.description }}</p>
                            </div>
                            <div  class="centrar">
                                <p class="izquierda">Fecha:</p> 
                                <p item-end class="blue" disabled="true">
                                    {{ date | date:'EEEE d , MMMM ' : 'es' }}
                                </p>
                            </div>
                            <div  class="centrar">
                                <p class="izquierda">Hora:</p>
                                <p class="blue" type="text" disabled="true">
                                    {{ hora.hour | slice:0:5}}
                                </p>
                            </div>
                            <div  class="centrar">
                                <p class="izquierda">Costo:</p>
                                <p class="blue" item-end type="text" disabled="true">
                                    {{ 'S/. ' + price }}
                                </p>
                            </div>
                    </ion-card>
                    
            
            <div padding>
                <button ion-button color="secondary" class="botonAccept" [class.button-disabled]="true" block (click)="payCulqi()">Pagar ahora con culqi</button>
            </div>

            <!-- <div padding>
                    <button ion-button color="secondary" class="botonAccept" [class.button-disabled]="true" block (click)="openModalPayu()">Pagar ahora con payu</button>
                </div> -->

            
        </div>
            </ion-list>
        </div>
    </div>



</ion-content>